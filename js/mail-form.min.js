var mailButton=document.querySelector(".mail-btn"),mailPopup=document.querySelector(".modal-mail"),mailClose=mailPopup.querySelector(".modal-close"),mailForm=mailPopup.querySelector(".mail-form"),username=mailPopup.querySelector(".form-username"),usermail=mailPopup.querySelector(".form-usermail"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("username")}catch(a){isStorageSupport=!1}
mailButton.addEventListener("click",function(){event.preventDefault();mailPopup.classList.add("modal-show");storage?(username.value=storage,usermail.focus()):username.focus()});mailClose.addEventListener("click",function(a){a.preventDefault();mailPopup.classList.remove("modal-show");mailPopup.classList.remove("modal-error")});
mailForm.addEventListener("submit",function(a){username.value&&usermail.value?isStorageSupport&&localStorage.setItem("username",username.value):(a.preventDefault(),mailPopup.classList.remove("modal-error"),mailPopup.offsetWidth=mailPopup.offsetWidth,mailPopup.classList.add("modal-error"))});window.addEventListener("keydown",function(a){27===a.keyCode&&mailPopup.classList.contains("modal-show")&&(a.preventDefault(),mailPopup.classList.remove("modal-show"),mailPopup.classList.remove("modal-error"))});
